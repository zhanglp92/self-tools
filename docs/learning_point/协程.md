## 协程

### 调度器跟踪
---

命令: `GODEBUG=schedtrace=1000,scheddetail=1`

### 协程/线程/进程关系
---

进程: 拥有独立的地址空间, 可独立运行在操作系统上.

线程: 进程的执行单元, 共享进程的地址空间, 运行时有独立的栈空间.

协程: 线程的"装饰品", 运行时将自己的栈复制到线程的栈空间, 切换时从线程栈复制出自己的栈内容.

### 地址空间
---

逻辑地址 ---(分段映射)---> 线性地址 ----(分页映射)---> 物理地址

在没有分段和分页之前存在3个问题:
1. 不隔离性; (内存可以被任何一个进程修改, 即A进程有可能会修改B进程的数据)
2. 不确定性; (进程被装载时, 可以装载到内存的任何一个位置)
3. 可利用率低; (即内存碎片问题)

"计算机科学领域不会存在任何问题, 如果存在就加个中间件"

#### 分段
---

分段的概念被提出后, 进程拥有了独立的地址空间(逻辑地址);

物理地址 = 进程被装载到的内存起始位置 + 虚拟地址(即偏移)

这时解决了问题(1)(2), 但(3)问题仍然存在.

#### 分页
---

分页的概念被提出后, 进程可以被划分成N页装载到内存的不同角落(线性地址).

物理地址 = 进程被装载到的内存起始位置 + 页的偏移(线性地址) + 页内的偏移

## 参考资料

[Go 调度器跟踪](https://colobu.com/2016/04/19/Scheduler-Tracing-In-Go/)

[内存地址 -- 介绍](https://www.zhihu.com/question/29918252)

[内存地址 -- 加深理解](https://blog.csdn.net/macrossdzh/article/details/5954763)
